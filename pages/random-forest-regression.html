<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初中生随机森林回归学习工具</title>
    
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <div class="container">
        
        <!-- 导航栏 -->
        <nav class="nav-bar">
            <ul class="nav-links">
                <li><a href="../index-modern.html">🏠 返回首页</a></li>
                <li><a href="#theory">📚 理论</a></li>
                <li><a href="#interactive">🎮 互动</a></li>
                <li><a href="#practice">💡 练习</a></li>
            </ul>
        </nav>
    
        <div class="header">
            <h1>🌲🌲🌲 随机森林回归学习工具</h1>
            <p>用房地产价格预测理解"集思广益"的AI智慧</p>
        </div>

        <div class="section">
            <h2>🤔 从一棵树到一片森林</h2>
            <div class="comparison-grid">
                <div class="comparison-card">
                    <h3>🌳 单棵决策树</h3>
                    <p>就像一个专家的判断，可能会过于自信或遗漏某些因素</p>
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>问题：</strong>容易"一叶障目"，可能错过重要因素
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>🌲🌲🌲 随机森林</h3>
                    <p>就像一群专家投票决定，每个专家看问题的角度略有不同</p>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>优势：</strong>集思广益，减少偏见，更加稳健
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🌲 森林是如何工作的？</h2>
            <div class="forest-container">
                <div class="tree-card">
                    <h4>决策树1号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>面积+学区</p>
                    <p><strong>预测：</strong>420万</p>
                </div>
                <div class="tree-card">
                    <h4>决策树2号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>房龄+地段</p>
                    <p><strong>预测：</strong>380万</p>
                </div>
                <div class="tree-card">
                    <h4>决策树3号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>楼层+装修</p>
                    <p><strong>预测：</strong>400万</p>
                </div>
                <div class="tree-card">
                    <h4>决策树4号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>朝向+物业</p>
                    <p><strong>预测：</strong>410万</p>
                </div>
            </div>
            <div class="final-result">
                🎯 森林最终预测：402.5万<br>
                <small>（所有树的平均值，更加准确可靠）</small>
            </div>
        </div>

        <div class="section">
            <h2>🎮 互动实验：森林投票系统</h2>
            <div class="interactive-demo">
                <h3>🏠 选择一套房子，看森林如何投票定价</h3>
                <div style="text-align: center; margin: 15px 0;">
                    <button class="scenario-btn active" onclick="selectScenario('学区房大三居')">学区房大三居</button>
                    <button class="scenario-btn" onclick="selectScenario('新小区小户型')">新小区小户型</button>
                    <button class="scenario-btn" onclick="selectScenario('老小区中户型')">老小区中户型</button>
                    <button class="scenario-btn" onclick="selectScenario('郊区大别墅')">郊区大别墅</button>
                </div>
                
                <div class="vote-container" id="voteContainer">
                    <!-- 动态生成的投票结果 -->
                </div>
                
                <div class="prediction-display" id="finalPrediction">
                    <h4>🎯 森林最终决策</h4>
                    <p>选择上方房子类型查看详细投票过程</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔍 随机森林的核心魔法</h2>
            
            <div class="advantage-card">
                <h4>🎲 随机性魔法</h4>
                <p><strong>数据随机：</strong>每棵树只看到部分数据，避免"死记硬背"</p>
                <p><strong>特征随机：</strong>每棵树只关注部分特征，避免"偏见"</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像让不同背景的专家评估同一套房子，有人关注学区，有人关注交通，有人关注环境...
                </div>
            </div>

            <div class="advantage-card">
                <h4>🤝 集体智慧</h4>
                <p><strong>投票机制：</strong>少数服从多数，减少极端判断</p>
                <p><strong>稳健性强：</strong>个别树的错误不会影响整体结果</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像班级投票选班长，比老师一个人决定更公平
                </div>
            </div>

            <div class="advantage-card">
                <h4>📊 自带评估</h4>
                <p><strong>袋外误差：</strong>用没参与训练的数据测试，自己就能知道准不准</p>
                <p><strong>特征重要性：</strong>自动告诉我们哪些因素最重要</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像考试前的模拟测试，知道自己哪里还需要加强
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🎯 什么时候用随机森林？</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
                    <h4>✅ 适用场景</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>数据量大，特征多</li>
                        <li>需要高准确度</li>
                        <li>担心过拟合</li>
                        <li>需要评估特征重要性</li>
                        <li>可以接受较慢的训练速度</li>
                    </ul>
                </div>
                <div style="background: #f8d7da; padding: 15px; border-radius: 8px;">
                    <h4>❌ 不适用场景</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>需要实时预测</li>
                        <li>数据量极小</li>
                        <li>需要简单模型</li>
                        <li>内存资源有限</li>
                        <li>需要精确概率</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🎓 学习总结：从简单到复杂的进化</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px;">
                <h3>📚 回归算法进化史</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; margin: 15px 0;">
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>📈 线性</h4>
                        <p>一条直线</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🏠 多元</h4>
                        <p>多维平面</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🌳 决策树</h4>
                        <p>分叉判断</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🌲🌲🌲 随机森林</h4>
                        <p>集思广益</p>
                    </div>
                </div>
                
                <h3>🎯 核心记忆口诀</h3>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <p><strong>口诀：</strong>"一个人走路，一群人开路"</p>
                    <p><strong>关键理解：</strong>随机森林通过"集思广益"，让多个决策树共同决策，既保持了决策树的易理解性，又大大提高了准确性和稳健性！</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 使用局部变量避免与utils.js冲突
        
        const forestScenarios = {
            '学区房大三居': {
                trees: [
                    { name: '学区专家', focus: '重点学区', prediction: 520, reason: '顶级学区溢价' },
                    { name: '面积专家', focus: '大三居户型', prediction: 480, reason: '改善型需求' },
                    { name: '地段专家', focus: '市中心地段', prediction: 500, reason: '交通便利' },
                    { name: '装修专家', focus: '精装修', prediction: 490, reason: '拎包入住' },
                    { name: '朝向专家', focus: '南北通透', prediction: 485, reason: '采光优秀' }
                ],
                final: 495,
                summary: '森林综合考虑学区、面积、地段等因素，给出最合理的495万定价'
            },
            '新小区小户型': {
                trees: [
                    { name: '房龄专家', focus: '全新小区', prediction: 320, reason: '房龄新' },
                    { name: '户型专家', focus: '小户型', prediction: 280, reason: '刚需首选' },
                    { name: '物业专家', focus: '品牌物业', prediction: 310, reason: '服务好' },
                    { name: '配套专家', focus: '配套齐全', prediction: 305, reason: '生活便利' },
                    { name: '交通专家', focus: '地铁近', prediction: 315, reason: '出行方便' }
                ],
                final: 306,
                summary: '森林认为新小区小户型适合刚需，综合评估306万是合理价格'
            },
            '老小区中户型': {
                trees: [
                    { name: '房龄专家', focus: '20年房龄', prediction: 220, reason: '房龄较大' },
                    { name: '户型专家', focus: '中户型', prediction: 250, reason: '面积适中' },
                    { name: '学区专家', focus: '普通学区', prediction: 230, reason: '学区一般' },
                    { name: '装修专家', focus: '老装修', prediction: 215, reason: '需重新装修' },
                    { name: '物业专家', focus: '老物业', prediction: 225, reason: '物业一般' }
                ],
                final: 228,
                summary: '森林考虑老小区的各种限制因素，给出228万的保守估价'
            },
            '郊区大别墅': {
                trees: [
                    { name: '面积专家', focus: '超大别墅', prediction: 680, reason: '稀缺资源' },
                    { name: '地段专家', focus: '郊区地段', prediction: 580, reason: '位置偏远' },
                    { name: '环境专家', focus: '环境优美', prediction: 650, reason: '绿化好' },
                    { name: '配套专家', focus: '配套不足', prediction: 620, reason: '生活不便' },
                    { name: '交通专家', focus: '交通不便', prediction: 600, reason: '通勤时间长' }
                ],
                final: 626,
                summary: '森林平衡了别墅优势与郊区劣势，给出626万的市场估价'
            }
        };

        function selectScenario(scenarioName) {
            // 更新按钮状态
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            const scenario = forestScenarios[scenarioName];
            
            // 生成投票结果
            let voteHTML = '';
            scenario.trees.forEach((tree, index) => {
                voteHTML += `
                    <div class="tree-vote">
                        <h5>${tree.name}</h5>
                        <div style="background: #e3f2fd; padding: 10px; border-radius: 5px; margin: 5px 0;">
                            <strong>${tree.prediction}万</strong>
                        </div>
                        <small>${tree.reason}</small>
                    </div>
                `;
            });
            
            document.getElementById('voteContainer').innerHTML = voteHTML;
            
            document.getElementById('finalPrediction').innerHTML = `
                <h4>🎯 随机森林最终决策</h4>
                <div style="font-size: 24px; margin: 10px 0;">
                    <strong>${scenario.final}万元</strong>
                </div>
                <p style="color: #666; font-style: italic;">
                    ${scenario.summary}
                </p>
            `;
        }

        // 页面加载时显示默认场景
        window.onload = function() {
            selectScenario('学区房大三居');
        };
    </script>
</body>
</html>