<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初中生随机森林分类学习工具</title>
    
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <div class="container">
        
        <!-- 导航栏 -->
        <nav class="nav-bar">
            <ul class="nav-links">
                <li><a href="../index-modern.html">🏠 返回首页</a></li>
                <li><a href="#theory">📚 理论</a></li>
                <li><a href="#interactive">🎮 互动</a></li>
                <li><a href="#practice">💡 练习</a></li>
            </ul>
        </nav>
    
        <div class="header">
            <h1>🌲🌲🌲 随机森林分类学习工具</h1>
            <p>用动物识别理解"集思广益"的AI智慧</p>
        </div>

        <div class="section">
            <h2>🤔 从一棵树到一片森林</h2>
            <div class="comparison-grid">
                <div class="comparison-card">
                    <h3>🌳 单棵决策树</h3>
                    <p>就像一个动物专家的判断，可能会过于自信或遗漏某些特征</p>
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>问题：</strong>容易"一叶障目"，可能把猫看成狗
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>🌲🌲🌲 随机森林</h3>
                    <p>就像一群动物专家投票决定，每个专家看问题的角度略有不同</p>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>优势：</strong>集思广益，减少偏见，更加准确
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🌲 森林是如何工作的？</h2>
            <div class="forest-container">
                <div class="tree-card">
                    <h4>决策树1号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>耳朵形状+大小</p>
                    <p><strong>投票：</strong>🐱 猫</p>
                </div>
                <div class="tree-card">
                    <h4>决策树2号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>毛发长度+颜色</p>
                    <p><strong>投票：</strong>🐶 狗</p>
                </div>
                <div class="tree-card">
                    <h4>决策树3号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>尾巴形状+叫声</p>
                    <p><strong>投票：</strong>🐱 猫</p>
                </div>
                <div class="tree-card">
                    <h4>决策树4号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>体型+行走方式</p>
                    <p><strong>投票：</strong>🐱 猫</p>
                </div>
                <div class="tree-card">
                    <h4>决策树5号</h4>
                    <div class="tree-visual">
                        <div class="tree-trunk"></div>
                    </div>
                    <p><strong>关注：</strong>面部特征+眼睛</p>
                    <p><strong>投票：</strong>🐱 猫</p>
                </div>
            </div>
            <div class="final-result">
                🎯 森林最终决策：🐱 猫<br>
                <small>（4票猫 vs 1票狗，多数胜出）</small>
            </div>
        </div>

        <div class="section">
            <h2>🎮 互动实验：森林投票系统</h2>
            <div class="interactive-demo">
                <h3>🐾 选择动物特征，看森林如何投票分类</h3>
                <div style="text-align: center; margin: 15px 0;">
                    <button class="scenario-btn active" onclick="selectAnimal('small_fluffy_cat')">小毛球猫</button>
                    <button class="scenario-btn" onclick="selectAnimal('big_shaggy_dog')">大毛茸狗</button>
                    <button class="scenario-btn" onclick="selectAnimal('colorful_parrot')">彩色鹦鹉</button>
                    <button class="scenario-btn" onclick="selectAnimal('tiny_hummingbird')">小蜂鸟</button>
                </div>
                
                <div class="vote-container" id="voteContainer">
                    <!-- 动态生成的投票结果 -->
                </div>
                
                <div class="prediction-display" id="finalPrediction">
                    <h4>🎯 随机森林最终决策</h4>
                    <p>选择上方动物类型查看详细投票过程</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔍 自己动手：创建动物分类器</h2>
            <div class="interactive-demo">
                <h3>🎯 输入动物特征，看森林如何分类</h3>
                
                <div style="text-align: center; margin: 15px 0;">
                    <label>体型大小：</label>
                    <select id="animalSize" class="feature-input">
                        <option value="small">小型</option>
                        <option value="medium">中型</option>
                        <option value="large">大型</option>
                    </select>
                    
                    <label>毛发长度：</label>
                    <select id="animalFur" class="feature-input">
                        <option value="short">短毛</option>
                        <option value="medium">中等</option>
                        <option value="long">长毛</option>
                    </select>
                    
                    <label>耳朵形状：</label>
                    <select id="animalEars" class="feature-input">
                        <option value="pointed">尖耳朵</option>
                        <option value="round">圆耳朵</option>
                        <option value="floppy">下垂耳</option>
                    </select>
                    
                    <label>尾巴类型：</label>
                    <select id="animalTail" class="feature-input">
                        <option value="long">长尾巴</option>
                        <option value="short">短尾巴</option>
                        <option value="none">无尾巴</option>
                    </select>
                    
                    <label>颜色：</label>
                    <select id="animalColor" class="feature-input">
                        <option value="solid">纯色</option>
                        <option value="spotted">斑点</option>
                        <option value="striped">条纹</option>
                    </select>
                </div>
                
                <button onclick="classifyAnimal()" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                    🎯 开始森林投票
                </button>
                
                <div id="classificationResult" class="classification-result" style="display: none;">
                    <!-- 分类结果将在这里显示 -->
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔍 随机森林的核心魔法</h2>
            
            <div class="advantage-card">
                <h4>🎲 随机性魔法</h4>
                <p><strong>数据随机：</strong>每棵树只看到部分动物，避免"死记硬背"</p>
                <p><strong>特征随机：</strong>每棵树只关注部分特征，避免"偏见"</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像让不同专家识别动物：兽医看生理特征，饲养员看行为习性，摄影师看外形特征...
                </div>
            </div>

            <div class="advantage-card">
                <h4>🤝 集体智慧</h4>
                <p><strong>投票机制：</strong>少数服从多数，减少极端判断</p>
                <p><strong>稳健性强：</strong>个别树的错误不会影响整体结果</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像班级投票识别动物，比一个人决定更准确
                </div>
            </div>

            <div class="advantage-card">
                <h4>📊 自带评估</h4>
                <p><strong>袋外误差：</strong>用没参与训练的动物测试，自己就能知道准不准</p>
                <p><strong>特征重要性：</strong>自动告诉我们哪些特征最重要（如耳朵形状比颜色更重要）</p>
                <div style="background: #fff3e0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <strong>生活比喻：</strong>就像考试前的模拟测试，知道自己哪里还需要加强
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🎯 什么时候用随机森林分类？</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
                    <h4>✅ 适用场景</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>数据量大，特征多</li>
                        <li>需要高准确度</li>
                        <li>担心过拟合</li>
                        <li>需要知道哪些特征重要</li>
                        <li>可以接受较慢的训练速度</li>
                    </ul>
                </div>
                <div style="background: #f8d7da; padding: 15px; border-radius: 8px;">
                    <h4>❌ 不适用场景</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li>需要实时预测</li>
                        <li>数据量极小</li>
                        <li>需要简单模型</li>
                        <li>内存资源有限</li>
                        <li>需要精确概率</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🎓 学习总结：从简单到复杂的进化</h2>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px;">
                <h3>📚 分类算法进化史</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; margin: 15px 0;">
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🎯 逻辑回归</h4>
                        <p>一条直线</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🌳 决策树</h4>
                        <p>分叉判断</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🌲 随机森林</h4>
                        <p>集思广益</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <h4>🧠 深度学习</h4>
                        <p>神经网络</p>
                    </div>
                </div>
                
                <h3>🎯 核心记忆口诀</h3>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <p><strong>口诀：</strong>"一个人判断，一群人智慧"</p>
                    <p><strong>关键理解：</strong>随机森林通过"集思广益"，让多个决策树共同投票，既保持了决策树的易理解性，又大大提高了分类准确性！</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 使用局部变量避免与utils.js冲突
        
        const animalScenarios = {
            'small_fluffy_cat': {
                name: '小毛球猫',
                trees: [
                    { name: '体型专家', focus: '小型体型', prediction: '🐱 猫', reason: '小型动物多为猫' },
                    { name: '毛发专家', focus: '蓬松毛发', prediction: '🐱 猫', reason: '蓬松毛发常见于猫' },
                    { name: '耳朵专家', focus: '尖耳朵', prediction: '🐱 猫', reason: '尖耳朵是猫的特征' },
                    { name: '尾巴专家', focus: '长尾巴', prediction: '🐱 猫', reason: '长尾巴符合猫特征' },
                    { name: '行为专家', focus: '优雅姿态', prediction: '🐱 猫', reason: '优雅是猫的特质' }
                ],
                final: '🐱 猫',
                summary: '森林一致认定这是可爱的小猫咪！'
            },
            'big_shaggy_dog': {
                name: '大毛茸狗',
                trees: [
                    { name: '体型专家', focus: '大型体型', prediction: '🐶 狗', reason: '大型动物多为狗' },
                    { name: '毛发专家', focus: '长毛茸毛', prediction: '🐶 狗', reason: '长毛常见于狗' },
                    { name: '耳朵专家', focus: '下垂耳', prediction: '🐶 狗', reason: '下垂耳是狗特征' },
                    { name: '尾巴专家', focus: '蓬松尾巴', prediction: '🐶 狗', reason: '蓬松尾巴像狗尾' },
                    { name: '行为专家', focus: '活泼好动', prediction: '🐶 狗', reason: '活泼是狗的特质' }
                ],
                final: '🐶 狗',
                summary: '森林一致认定这是忠诚的大狗狗！'
            },
            'colorful_parrot': {
                name: '彩色鹦鹉',
                trees: [
                    { name: '颜色专家', focus: '鲜艳色彩', prediction: '🦜 鹦鹉', reason: '鲜艳羽毛是鹦鹉特征' },
                    { name: '体型专家', focus: '中型鸟类', prediction: '🦜 鹦鹉', reason: '中型鸟类多为鹦鹉' },
                    { name: '喙部专家', focus: '弯曲喙', prediction: '🦜 鹦鹉', reason: '弯曲喙是鹦鹉特征' },
                    { name: '翅膀专家', focus: '彩色翅膀', prediction: '🦜 鹦鹉', reason: '彩色翅膀符合鹦鹉' },
                    { name: '声音专家', focus: '会学人说话', prediction: '🦜 鹦鹉', reason: '学舌是鹦鹉特长' }
                ],
                final: '🦜 鹦鹉',
                summary: '森林一致认定这是聪明的彩色鹦鹉！'
            },
            'tiny_hummingbird': {
                name: '小蜂鸟',
                trees: [
                    { name: '体型专家', focus: '超小型', prediction: '🐦 蜂鸟', reason: '超小型是蜂鸟特征' },
                    { name: '翅膀专家', focus: '快速振动', prediction: '🐦 蜂鸟', reason: '快速振动翅膀是蜂鸟' },
                    { name: '颜色专家', focus: '金属光泽', prediction: '🐦 蜂鸟', reason: '金属光泽羽毛' },
                    { name: '喙部专家', focus: '细长喙', prediction: '🐦 蜂鸟', reason: '细长喙吸花蜜' },
                    { name: '飞行专家', focus: '悬停飞行', prediction: '🐦 蜂鸟', reason: '悬停飞行是蜂鸟特技' }
                ],
                final: '🐦 蜂鸟',
                summary: '森林一致认定这是灵巧的小蜂鸟！'
            }
        };

        function selectAnimal(animalType) {
            // 更新按钮状态
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            const scenario = animalScenarios[animalType];
            
            // 生成投票结果
            let voteHTML = '';
            scenario.trees.forEach((tree, index) => {
                voteHTML += `
                    <div class="tree-vote">
                        <h5>${tree.name}</h5>
                        <div style="background: #e3f2fd; padding: 10px; border-radius: 5px; margin: 5px 0;">
                            <strong>${tree.prediction}</strong>
                        </div>
                        <small>${tree.reason}</small>
                    </div>
                `;
            });
            
            document.getElementById('voteContainer').innerHTML = voteHTML;
            
            document.getElementById('finalPrediction').innerHTML = `
                <h4>🎯 随机森林最终决策</h4>
                <div style="font-size: 24px; margin: 10px 0;">
                    <strong>${scenario.final}</strong>
                </div>
                <p style="color: #666; font-style: italic;">
                    ${scenario.summary}
                </p>
            `;
        }

        function classifyAnimal() {
            const size = document.getElementById('animalSize').value;
            const fur = document.getElementById('animalFur').value;
            const ears = document.getElementById('animalEars').value;
            const tail = document.getElementById('animalTail').value;
            const color = document.getElementById('animalColor').value;
            
            // 简单的随机森林模拟
            let votes = [];
            
            // 树1：基于体型和耳朵
            if (size === 'small' && ears === 'pointed') votes.push('🐱 猫');
            else if (size === 'large' && ears === 'floppy') votes.push('🐶 狗');
            else votes.push('🐦 鸟');
            
            // 树2：基于毛发和尾巴
            if (fur === 'long' && tail === 'long') votes.push('🐱 猫');
            else if (fur === 'medium' && tail === 'short') votes.push('🐶 狗');
            else votes.push('🐦 鸟');
            
            // 树3：基于颜色和体型
            if (color === 'solid' && size === 'small') votes.push('🐱 猫');
            else if (color === 'spotted' && size === 'medium') votes.push('🐶 狗');
            else votes.push('🐦 鸟');
            
            // 树4：基于耳朵和尾巴
            if (ears === 'round' && tail === 'long') votes.push('🐱 猫');
            else if (ears === 'floppy' && tail === 'short') votes.push('🐶 狗');
            else votes.push('🐦 鸟');
            
            // 树5：基于综合判断
            let catScore = 0, dogScore = 0, birdScore = 0;
            if (size === 'small') catScore++;
            if (ears === 'pointed') catScore++;
            if (tail === 'long') catScore++;
            if (size === 'large') dogScore++;
            if (ears === 'floppy') dogScore++;
            if (size === 'small' && ears === 'round') birdScore++;
            
            if (catScore >= 2) votes.push('🐱 猫');
            else if (dogScore >= 2) votes.push('🐶 狗');
            else votes.push('🐦 鸟');
            
            // 统计投票结果
            const voteCount = {};
            votes.forEach(vote => {
                voteCount[vote] = (voteCount[vote] || 0) + 1;
            });
            
            let finalResult = '';
            let maxVotes = 0;
            for (let animal in voteCount) {
                if (voteCount[animal] > maxVotes) {
                    maxVotes = voteCount[animal];
                    finalResult = animal;
                }
            }
            
            // 显示结果
            const resultDiv = document.getElementById('classificationResult');
            let className = '';
            if (finalResult.includes('猫')) className = 'cat';
            else if (finalResult.includes('狗')) className = 'dog';
            else className = 'bird';
            
            resultDiv.className = `classification-result ${className}`;
            resultDiv.innerHTML = `
                <h3>🎯 随机森林分类结果</h3>
                <div style="font-size: 32px; margin: 10px 0;">${finalResult}</div>
                <div style="font-size: 14px; opacity: 0.8;">
                    投票详情：${votes.join(' | ')}
                </div>
                <div style="margin-top: 10px;">
                    <strong>置信度：</strong>${maxVotes}/6 (${Math.round(maxVotes/6*100)}%)
                </div>
            `;
            resultDiv.style.display = 'block';
        }

        // 页面加载时显示默认场景
        window.onload = function() {
            selectAnimal('small_fluffy_cat');
        };
    </script>
</body>
</html>