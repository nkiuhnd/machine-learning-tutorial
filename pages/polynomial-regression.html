<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆä¸­ç”Ÿå¤šé¡¹å¼å›å½’å­¦ä¹ å·¥å…·</title>
        <!-- ä½¿ç”¨æ›´å¿«çš„CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // å¦‚æœChart.jsåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
        if (typeof Chart === 'undefined') {
            console.warn('Chart.jsåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ');
            window.Chart = function(ctx, config) {
                this.data = config.data;
                this.options = config.options;
                this.update = function() {
                    console.log('å›¾è¡¨æ›´æ–°ï¼ˆæ¨¡æ‹Ÿï¼‰');
                };
            };
        }
    </script>
    <script src="../js/utils.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <!-- ä½¿ç”¨æ›´å¿«çš„CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // å¦‚æœChart.jsåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
        if (typeof Chart === 'undefined') {
            console.warn('Chart.jsåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ');
            window.Chart = function(ctx, config) {
                this.data = config.data;
                this.options = config.options;
                this.update = function() {
                    console.log('å›¾è¡¨æ›´æ–°ï¼ˆæ¨¡æ‹Ÿï¼‰');
                };
            };
        }
    </script>
    
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <div class="container">
        
        <!-- å¯¼èˆªæ  -->
        <nav class="nav-bar">
            <ul class="nav-links">
                <li><a href="../index-modern.html">ğŸ  è¿”å›é¦–é¡µ</a></li>
                <li><a href="#theory">ğŸ“š ç†è®º</a></li>
                <li><a href="#interactive">ğŸ® äº’åŠ¨</a></li>
                <li><a href="#practice">ğŸ’¡ ç»ƒä¹ </a></li>
            </ul>
        </nav>
    
        <div class="header">
            <h1>ğŸŒ± å¤šé¡¹å¼å›å½’å­¦ä¹ å·¥å…·</h1>
            <p>ç†è§£æ¤ç‰©ç”Ÿé•¿ä¸æ–½è‚¥é‡çš„éçº¿æ€§å…³ç³»</p>
        </div>
        
        <div class="section">
            <h2>ğŸŒ¿ ç¬¬ä¸€æ­¥ï¼šè§‚å¯ŸçœŸå®æ•°æ®</h2>
            <p>æˆ‘ä»¬æ¥çœ‹çœ‹æ¤ç‰©ç”Ÿé•¿é«˜åº¦ä¸æ–½è‚¥é‡çš„çœŸå®å…³ç³»ï¼š</p>
            
            <table class="data-table" style="margin: 10px 0;">
                <thead>
                    <tr>
                        <th>å®éªŒç»„</th>
                        <th>æ–½è‚¥é‡(g)</th>
                        <th>æ¤ç‰©é«˜åº¦(cm)</th>
                        <th>è§‚å¯Ÿç°è±¡</th>
                    </tr>
                </thead>
                <tbody id="dataTable">
                    <tr><td>Aç»„</td><td>0</td><td>10</td><td>ç¼ºä¹è¥å…»ï¼Œç”Ÿé•¿ç¼“æ…¢</td></tr>
                    <tr><td>Bç»„</td><td>2</td><td>25</td><td>é€‚é‡æ–½è‚¥ï¼Œç”Ÿé•¿è‰¯å¥½</td></tr>
                    <tr><td>Cç»„</td><td>5</td><td>45</td><td>æœ€ä½³æ–½è‚¥é‡ï¼Œç”Ÿé•¿æœ€å¿«</td></tr>
                    <tr><td>Dç»„</td><td>8</td><td>35</td><td>æ–½è‚¥è¿‡å¤šï¼Œç”Ÿé•¿æ”¾ç¼“</td></tr>
                    <tr><td>Eç»„</td><td>12</td><td>20</td><td>ä¸¥é‡è¿‡é‡ï¼Œç”Ÿé•¿å—é˜»</td></tr>
                    <tr><td>Fç»„</td><td>15</td><td>8</td><td>ä¸­æ¯’ç°è±¡ï¼Œæ¤æ ªçŸ®å°</td></tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ¤” æ€è€ƒï¼šçº¿æ€§ vs å¤šé¡¹å¼å›å½’</h2>
            <div class="comparison-grid">
                <div class="comparison-card">
                    <h3>ğŸ“ˆ çº¿æ€§å›å½’</h3>
                    <p>å…¬å¼ï¼šé«˜åº¦ = a Ã— æ–½è‚¥ + b</p>
                    <div class="info-panel">
                        <strong>é—®é¢˜ï¼š</strong>æ— æ³•æè¿°"æ–½è‚¥è¿‡å¤šåè€ŒæŠ‘åˆ¶ç”Ÿé•¿"çš„ç°è±¡
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>ğŸ  å¤šé¡¹å¼å›å½’</h3>
                    <p>å…¬å¼ï¼šé«˜åº¦ = aÃ—æ–½è‚¥Â² + bÃ—æ–½è‚¥ + c</p>
                    <div class="info-panel">
                        <strong>ä¼˜åŠ¿ï¼š</strong>èƒ½å®Œç¾æ‹Ÿåˆå…ˆä¸Šå‡åä¸‹é™çš„æ›²çº¿å…³ç³»
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>ğŸ¯ äºŒæ¬¡å¤šé¡¹å¼</h3>
                    <p>æŠ›ç‰©çº¿å½¢çŠ¶</p>
                    <div class="info-panel">
                        <strong>ç‰¹ç‚¹ï¼š</strong>å­˜åœ¨æœ€å¤§å€¼ç‚¹ï¼ˆæœ€ä½³æ–½è‚¥é‡ï¼‰
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ˆ ç¬¬äºŒæ­¥ï¼šå¯è§†åŒ–å¤šé¡¹å¼å…³ç³»</h2>
            <div style="margin-bottom: 15px;">
                <button onclick="toggleDataPoints()" id="showDataBtn" style="background: #dc3545; color: white; font-weight: bold; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                    ğŸ‘ï¸ æ˜¾ç¤ºæ•°æ®ç‚¹
                </button>
                
            </div>
            <div class="chart-container">
                <canvas id="polynomialChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ® ç¬¬ä¸‰æ­¥ï¼šåŠ¨æ‰‹å®éªŒ</h2>
            <div class="controls" style="flex-direction: column; align-items: stretch;">
                <div class="input-group" style="margin-bottom: 15px;">
                    <label>æ·»åŠ æ–°å®éªŒæ•°æ®ï¼š</label>
                    <input type="number" id="newFertilizer" placeholder="æ–½è‚¥é‡(g)" min="0" max="20" step="0.5" style="margin: 5px 0;">
                    <input type="number" id="newHeight" placeholder="æ¤ç‰©é«˜åº¦(cm)" min="0" max="100" step="1" style="margin: 5px 0;">
                    <button onclick="addData()" style="margin: 5px 0;">æ·»åŠ æ•°æ®</button>
                </div>
                
                <div class="input-group" style="margin-bottom: 15px;">
                    <label>é¢„æµ‹æ¤ç‰©é«˜åº¦ï¼š</label>
                    <input type="number" id="predFertilizer" placeholder="æ–½è‚¥é‡(g)" min="0" max="20" step="0.5" value="6" style="margin: 5px 0;">
                    <button onclick="makePrediction()" style="margin: 5px 0;">é¢„æµ‹é«˜åº¦</button>
                </div>
                
                <button onclick="calculateBestFitCurve()" style="margin: 5px 0; background: #28a745; font-weight: bold;">ğŸ” è®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿</button>
                <button onclick="findOptimalFertilizer()" style="margin: 5px 0; background: #007bff;">ğŸ¯ æ‰¾å‡ºæœ€ä½³æ–½è‚¥é‡</button>
                <button onclick="resetData()" style="margin: 5px 0;">é‡ç½®æ•°æ®</button>
                <button onclick="generateRandomData()" style="margin: 5px 0;">ç”Ÿæˆéšæœºæ•°æ®</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“Š å¤šé¡¹å¼å›å½’åˆ†æ</h2>
            <div class="polynomial-curve">
                <p><strong>äºŒæ¬¡å¤šé¡¹å¼å…¬å¼ï¼š</strong>é«˜åº¦ = aÃ—æ–½è‚¥Â² + bÃ—æ–½è‚¥ + c</p>
                <div id="formulaDisplay">ç‚¹å‡»"è®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿"æŸ¥çœ‹æ‹Ÿåˆç»“æœ</div>
            </div>
            <div id="curveAnalysis" class="polynomial-curve">
                <p><strong>æ›²çº¿ç‰¹å¾åˆ†æï¼š</strong></p>
                <div id="curveDetails">è®¡ç®—å®Œæˆåï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ›²çº¿çš„æ•°å­¦ç‰¹å¾</div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ”¢ è®¡ç®—ç»“æœ</h2>
            <div class="prediction-result" id="predictionResult">
                è¯·è¾“å…¥æ–½è‚¥é‡è¿›è¡Œé¢„æµ‹
            </div>
            <div class="info-panel" id="optimalResult">
                <strong>æœ€ä½³æ–½è‚¥é‡ï¼š</strong>è®¡ç®—å®Œæˆåæ˜¾ç¤ºèƒ½è·å¾—æœ€å¤§æ¤ç‰©é«˜åº¦çš„æ–½è‚¥é‡
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ¤– ä¸äººå·¥æ™ºèƒ½çš„å…³ç³»</h2>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 5px solid #4CAF50;">
                <h3>ğŸ§  AIå¦‚ä½•ç”¨å¤šé¡¹å¼å›å½’ï¼Ÿ</h3>
                <p><strong>å†œä¸šæ™ºèƒ½ï¼š</strong>æ ¹æ®åœŸå£¤æ¹¿åº¦ã€æ¸©åº¦ã€æ–½è‚¥é‡é¢„æµ‹ä½œç‰©äº§é‡</p>
                <p><strong>ç»æµé¢„æµ‹ï¼š</strong>æ ¹æ®å¹¿å‘ŠæŠ•å…¥é¢„æµ‹é”€å”®é¢ï¼ˆå­˜åœ¨æœ€ä½³æŠ•å…¥ç‚¹ï¼‰</p>
                <p><strong>åŒ»ç–—è¯Šæ–­ï¼š</strong>æ ¹æ®è¯ç‰©å‰‚é‡é¢„æµ‹æ²»ç–—æ•ˆæœï¼ˆå­˜åœ¨æœ€ä½³å‰‚é‡ï¼‰</p>
                <p><strong>å·¥ç¨‹è®¾è®¡ï¼š</strong>æ ¹æ®ææ–™ç”¨é‡é¢„æµ‹äº§å“æ€§èƒ½</p>
                
                <h3>ğŸ¯ å¤šé¡¹å¼å›å½’çš„é­”åŠ›</h3>
                <p>ç°å®ä¸–ç•Œå¾ˆå¤šå…³ç³»éƒ½ä¸æ˜¯ç®€å•çš„ç›´çº¿ï¼Œè€Œæ˜¯å­˜åœ¨æœ€ä¼˜ç‚¹çš„æ›²çº¿å…³ç³»ã€‚å¤šé¡¹å¼å›å½’è®©AIèƒ½å¤Ÿæ‰¾åˆ°è¿™äº›"ç”œèœœç‚¹"ï¼Œå¸®åŠ©äººç±»åšå‡ºæœ€ä¼˜å†³ç­–ï¼</p>
            </div>
        </div>
    </div>

    <script>
        // ä½¿ç”¨å±€éƒ¨å˜é‡é¿å…ä¸utils.jså†²çª
        
        let polyChart;
        let plantData = [
            {fertilizer: 0, height: 10, name: 'Aç»„'},
            {fertilizer: 2, height: 25, name: 'Bç»„'},
            {fertilizer: 5, height: 45, name: 'Cç»„'},
            {fertilizer: 8, height: 35, name: 'Dç»„'},
            {fertilizer: 12, height: 20, name: 'Eç»„'},
            {fertilizer: 15, height: 8, name: 'Fç»„'}
        ];
        
        let polynomialCoeffs = null;
        let curveVisible = false;
        
        function initChart() {
            const ctx = document.getElementById('polynomialChart').getContext('2d');
            
            polyChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'å®éªŒæ•°æ®',
                        data: [],
                        backgroundColor: 'red',
                        borderColor: 'red',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: 'å¤šé¡¹å¼æ‹Ÿåˆæ›²çº¿',
                        data: [],
                        type: 'line',
                        borderColor: 'green',
                        backgroundColor: 'rgba(0, 255, 0, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ–½è‚¥é‡ (g)',
                                font: { size: 14 }
                            },
                            min: -1,
                            max: 20,
                            ticks: { font: { size: 12 } }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'æ¤ç‰©é«˜åº¦ (cm)',
                                font: { size: 14 }
                            },
                            min: 0,
                            max: 50,
                            ticks: { font: { size: 12 } }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'æ¤ç‰©é«˜åº¦ä¸æ–½è‚¥é‡çš„å¤šé¡¹å¼å…³ç³»',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            labels: { font: { size: 12 } }
                        }
                    }
                }
            });
        }
        
        function toggleDataPoints() {
            if (!polyChart.data.datasets[0].data.length) {
                // æ˜¾ç¤ºæ•°æ®ç‚¹
                polyChart.data.datasets[0].data = plantData.map(d => ({x: d.fertilizer, y: d.height}));
                document.getElementById('showDataBtn').innerHTML = 'ğŸ™ˆ éšè—æ•°æ®ç‚¹';
                document.getElementById('showDataBtn').style.background = '#6c757d';
            } else {
                // éšè—æ•°æ®ç‚¹
                polyChart.data.datasets[0].data = [];
                polyChart.data.datasets[1].data = [];
                document.getElementById('showDataBtn').innerHTML = 'ğŸ‘ï¸ æ˜¾ç¤ºæ•°æ®ç‚¹';
                document.getElementById('showDataBtn').style.background = '#dc3545';
                curveVisible = false;
            }
            polyChart.update();
        }
        
        function calculatePolynomialRegression() {
            const n = plantData.length;
            let sumX = 0, sumX2 = 0, sumX3 = 0, sumX4 = 0;
            let sumY = 0, sumXY = 0, sumX2Y = 0;
            
            plantData.forEach(d => {
                const x = d.fertilizer;
                const y = d.height;
                sumX += x;
                sumX2 += x * x;
                sumX3 += x * x * x;
                sumX4 += x * x * x * x;
                sumY += y;
                sumXY += x * y;
                sumX2Y += x * x * y;
            });
            
            // è§£äºŒæ¬¡å¤šé¡¹å¼æ–¹ç¨‹ç»„
            const A = [[n, sumX, sumX2], [sumX, sumX2, sumX3], [sumX2, sumX3, sumX4]];
            const B = [sumY, sumXY, sumX2Y];
            
            // ä½¿ç”¨å…‹è±å§†æ³•åˆ™æ±‚è§£
            const det = A[0][0]*(A[1][1]*A[2][2] - A[1][2]*A[2][1]) - A[0][1]*(A[1][0]*A[2][2] - A[1][2]*A[2][0]) + A[0][2]*(A[1][0]*A[2][1] - A[1][1]*A[2][0]);
            
            if (Math.abs(det) < 1e-10) {
                return {a: 0, b: 0, c: 0};
            }
            
            const detA = B[0]*(A[1][1]*A[2][2] - A[1][2]*A[2][1]) - A[0][1]*(B[1]*A[2][2] - A[1][2]*B[2]) + A[0][2]*(B[1]*A[2][1] - A[1][1]*B[2]);
            const detB = A[0][0]*(B[1]*A[2][2] - A[1][2]*B[2]) - B[0]*(A[1][0]*A[2][2] - A[1][2]*A[2][0]) + A[0][2]*(A[1][0]*B[2] - B[1]*A[2][0]);
            const detC = A[0][0]*(A[1][1]*B[2] - B[1]*A[2][1]) - A[0][1]*(A[1][0]*B[2] - B[1]*A[2][0]) + B[0]*(A[1][0]*A[2][1] - A[1][1]*A[2][0]);
            
            return {
                c: detA / det,
                b: detB / det,
                a: detC / det
            };
        }
        
        function calculateBestFitCurve() {
            if (!polyChart.data.datasets[0].data.length) {
                alert('è¯·å…ˆç‚¹å‡»"æ˜¾ç¤ºæ•°æ®ç‚¹"æŒ‰é’®ï¼Œè®©æ•°æ®å‡ºç°åœ¨å›¾è¡¨ä¸­ï¼');
                return;
            }
            
            if (plantData.length < 3) {
                alert('éœ€è¦è‡³å°‘3ä¸ªæ•°æ®ç‚¹æ‰èƒ½è®¡ç®—äºŒæ¬¡å¤šé¡¹å¼ï¼');
                return;
            }
            
            document.getElementById('formulaDisplay').innerHTML = 
                'ğŸ§® æ­£åœ¨ç”¨æœ€å°äºŒä¹˜æ³•è®¡ç®—æœ€ä½³äºŒæ¬¡å¤šé¡¹å¼...';
            
            // è®¡ç®—å¤šé¡¹å¼ç³»æ•°
            polynomialCoeffs = calculatePolynomialRegression();
            
            // ç”Ÿæˆæ‹Ÿåˆæ›²çº¿æ•°æ®
            const curveData = [];
            for (let x = -1; x <= 20; x += 0.2) {
                const y = polynomialCoeffs.a * x * x + polynomialCoeffs.b * x + polynomialCoeffs.c;
                curveData.push({x: x, y: Math.max(0, y)});
            }
            
            polyChart.data.datasets[1].data = curveData;
            polyChart.update();
            
            // æ˜¾ç¤ºå…¬å¼å’Œæ›²çº¿ç‰¹å¾
            const vertexX = -polynomialCoeffs.b / (2 * polynomialCoeffs.a);
            const vertexY = polynomialCoeffs.a * vertexX * vertexX + polynomialCoeffs.b * vertexX + polynomialCoeffs.c;
            
            document.getElementById('formulaDisplay').innerHTML = 
                `ğŸ“Š äºŒæ¬¡å¤šé¡¹å¼ç»“æœï¼š<br>é«˜åº¦ = ${polynomialCoeffs.a.toFixed(3)}Ã—æ–½è‚¥Â² + ${polynomialCoeffs.b.toFixed(3)}Ã—æ–½è‚¥ + ${polynomialCoeffs.c.toFixed(3)}`;
            
            document.getElementById('curveDetails').innerHTML = 
                `ğŸ“ˆ æ›²çº¿ç‰¹å¾ï¼š<br>â€¢ å¼€å£æ–¹å‘ï¼š${polynomialCoeffs.a < 0 ? 'å‘ä¸‹ï¼ˆæœ‰æœ€å¤§å€¼ï¼‰' : 'å‘ä¸Šï¼ˆæœ‰æœ€å°å€¼ï¼‰'}<br>â€¢ é¡¶ç‚¹ä½ç½®ï¼šæ–½è‚¥${vertexX.toFixed(1)}gæ—¶ï¼Œé«˜åº¦${Math.max(0, vertexY).toFixed(1)}cm<br>â€¢ æœ€ä½³æ–½è‚¥é‡ï¼š${Math.max(0, Math.min(20, vertexX)).toFixed(1)}g`;
            
            curveVisible = true;
        }
        
        function findOptimalFertilizer() {
            if (!curveVisible) {
                alert('è¯·å…ˆè®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿ï¼');
                return;
            }
            
            const vertexX = -polynomialCoeffs.b / (2 * polynomialCoeffs.a);
            const vertexY = polynomialCoeffs.a * vertexX * vertexX + polynomialCoeffs.b * vertexX + polynomialCoeffs.c;
            
            const optimalFertilizer = Math.max(0, Math.min(20, vertexX));
            const maxHeight = Math.max(0, vertexY);
            
            document.getElementById('optimalResult').innerHTML = 
                `<strong>ğŸ¯ æœ€ä½³æ–½è‚¥é‡ï¼š${optimalFertilizer.toFixed(1)}g</strong><br>
                 æ­¤æ—¶æ¤ç‰©é«˜åº¦å¯è¾¾ï¼š${maxHeight.toFixed(1)}cm<br>
                 è¶…è¿‡æˆ–ä½äºè¿™ä¸ªé‡éƒ½ä¼šé™ä½ç”Ÿé•¿æ•ˆæœï¼`;
        }
        
        function makePrediction() {
            if (!curveVisible) {
                alert('è¯·å…ˆè®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿ï¼');
                return;
            }
            
            const fertilizer = parseFloat(document.getElementById('predFertilizer').value);
            if (isNaN(fertilizer)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ–½è‚¥é‡ï¼');
                return;
            }
            
            const predictedHeight = polynomialCoeffs.a * fertilizer * fertilizer + 
                                  polynomialCoeffs.b * fertilizer + 
                                  polynomialCoeffs.c;
            
            document.getElementById('predictionResult').innerHTML = 
                `ğŸŒ± é¢„æµ‹ç»“æœï¼šæ–½è‚¥${fertilizer}gï¼Œæ¤ç‰©é«˜åº¦çº¦ä¸º${Math.max(0, predictedHeight).toFixed(1)}cm`;
            
            // åœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºé¢„æµ‹ç‚¹
            const predictionDataset = {
                label: 'é¢„æµ‹ç‚¹',
                data: [{x: fertilizer, y: Math.max(0, predictedHeight)}],
                backgroundColor: 'purple',
                borderColor: 'purple',
                pointRadius: 10,
                pointStyle: 'star'
            };
            
            // ç§»é™¤ä¹‹å‰çš„é¢„æµ‹ç‚¹
            if (polyChart.data.datasets.length > 3) {
                polyChart.data.datasets.pop();
            }
            
            polyChart.data.datasets.push(predictionDataset);
            polyChart.update();
        }
        
        function addData() {
            const fertilizer = parseFloat(document.getElementById('newFertilizer').value);
            const height = parseFloat(document.getElementById('newHeight').value);
            
            if (isNaN(fertilizer) || isNaN(height)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ï¼');
                return;
            }
            
            plantData.push({fertilizer, height, name: 'æ–°æ•°æ®'});
            
            // æ›´æ–°è¡¨æ ¼
            const tbody = document.getElementById('dataTable');
            const row = tbody.insertRow();
            row.innerHTML = `<td>æ–°æ•°æ®</td><td>${fertilizer}</td><td>${height}</td><td>ç”¨æˆ·æ·»åŠ </td>`;
            
            // æ›´æ–°å›¾è¡¨
            if (polyChart.data.datasets[0].data.length) {
                polyChart.data.datasets[0].data = plantData.map(d => ({x: d.fertilizer, y: d.height}));
            }
            
            // æ¸…é™¤ç°æœ‰çš„æ›²çº¿
            polyChart.data.datasets[1].data = [];
            curveVisible = false;
            
            document.getElementById('formulaDisplay').innerHTML = 
                `ğŸ“Š å·²æ·»åŠ æ–°æ•°æ®ï¼ç‚¹å‡»"è®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿"é‡æ–°æ‹Ÿåˆ`;
            document.getElementById('predictionResult').innerHTML = 
                `è¯·è¾“å…¥æ–½è‚¥é‡è¿›è¡Œé¢„æµ‹`;
            
            polyChart.update();
        }
        
        function resetData() {
            plantData = [
                {fertilizer: 0, height: 10, name: 'Aç»„'},
                {fertilizer: 2, height: 25, name: 'Bç»„'},
                {fertilizer: 5, height: 45, name: 'Cç»„'},
                {fertilizer: 8, height: 35, name: 'Dç»„'},
                {fertilizer: 12, height: 20, name: 'Eç»„'},
                {fertilizer: 15, height: 8, name: 'Fç»„'}
            ];
            
            // é‡ç½®è¡¨æ ¼
            const tbody = document.getElementById('dataTable');
            tbody.innerHTML = `
                <tr><td>Aç»„</td><td>0</td><td>10</td><td>ç¼ºä¹è¥å…»ï¼Œç”Ÿé•¿ç¼“æ…¢</td></tr>
                <tr><td>Bç»„</td><td>2</td><td>25</td><td>é€‚é‡æ–½è‚¥ï¼Œç”Ÿé•¿è‰¯å¥½</td></tr>
                <tr><td>Cç»„</td><td>5</td><td>45</td><td>æœ€ä½³æ–½è‚¥é‡ï¼Œç”Ÿé•¿æœ€å¿«</td></tr>
                <tr><td>Dç»„</td><td>8</td><td>35</td><td>æ–½è‚¥è¿‡å¤šï¼Œç”Ÿé•¿æ”¾ç¼“</td></tr>
                <tr><td>Eç»„</td><td>12</td><td>20</td><td>ä¸¥é‡è¿‡é‡ï¼Œç”Ÿé•¿å—é˜»</td></tr>
                <tr><td>Fç»„</td><td>15</td><td>8</td><td>ä¸­æ¯’ç°è±¡ï¼Œæ¤æ ªçŸ®å°</td></tr>
            `;
            
            // é‡ç½®å›¾è¡¨
            polyChart.data.datasets[0].data = [];
            polyChart.data.datasets[1].data = [];
            polyChart.data.datasets.pop(); // ç§»é™¤é¢„æµ‹ç‚¹
            
            document.getElementById('formulaDisplay').innerHTML = 
                'ç‚¹å‡»"è®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿"æŸ¥çœ‹æ‹Ÿåˆç»“æœ';
            document.getElementById('predictionResult').innerHTML = 
                'è¯·è¾“å…¥æ–½è‚¥é‡è¿›è¡Œé¢„æµ‹';
            document.getElementById('optimalResult').innerHTML = 
                '<strong>æœ€ä½³æ–½è‚¥é‡ï¼š</strong>è®¡ç®—å®Œæˆåæ˜¾ç¤ºèƒ½è·å¾—æœ€å¤§æ¤ç‰©é«˜åº¦çš„æ–½è‚¥é‡';
            
            curveVisible = false;
            polynomialCoeffs = null;
            polyChart.update();
        }
        
        function generateRandomData() {
            plantData = [];
            const names = ['å®éªŒç»„1', 'å®éªŒç»„2', 'å®éªŒç»„3', 'å®éªŒç»„4', 'å®éªŒç»„5', 'å®éªŒç»„6'];
            
            for (let i = 0; i < 6; i++) {
                const fertilizer = Math.floor(Math.random() * 18) + 1; // 1-18g
                // ç”ŸæˆæŠ›ç‰©çº¿å½¢çŠ¶çš„æ•°æ®
                const height = Math.floor(-0.3 * fertilizer * fertilizer + 3 * fertilizer + 10 + (Math.random() - 0.5) * 10);
                plantData.push({fertilizer, height: Math.max(5, height), name: names[i]});
            }
            
            // æ›´æ–°è¡¨æ ¼
            const tbody = document.getElementById('dataTable');
            tbody.innerHTML = '';
            plantData.forEach(data => {
                const row = tbody.insertRow();
                row.innerHTML = `<td>${data.name}</td><td>${data.fertilizer}</td><td>${data.height}</td><td>éšæœºæ•°æ®</td>`;
            });
            
            // æ›´æ–°å›¾è¡¨
            if (polyChart.data.datasets[0].data.length) {
                polyChart.data.datasets[0].data = plantData.map(d => ({x: d.fertilizer, y: d.height}));
            }
            
            // æ¸…é™¤ç°æœ‰çš„æ›²çº¿
            polyChart.data.datasets[1].data = [];
            curveVisible = false;
            
            document.getElementById('formulaDisplay').innerHTML = 
                'å·²ç”Ÿæˆéšæœºæ•°æ®ï¼ç‚¹å‡»"è®¡ç®—æœ€ä½³å¤šé¡¹å¼æ›²çº¿"é‡æ–°æ‹Ÿåˆ';
            document.getElementById('predictionResult').innerHTML = 
                'è¯·è¾“å…¥æ–½è‚¥é‡è¿›è¡Œé¢„æµ‹';
            
            polyChart.update();
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            initChart();
        };
    </script>

    <div class="section">
        <h2>ğŸ“ æ‹“å±•å­¦ä¹ ï¼šæ›´å¤šå›å½’ç®—æ³•</h2>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 5px solid #007bff;">
            <h3>ğŸ“š å›å½’ç®—æ³•å…¨å®¶ç¦</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                <div style="background: white; padding: 10px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <h4>ğŸ¯ çº¿æ€§æ–¹æ³•</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li><strong>å²­å›å½’ï¼š</strong>åŠ L2æ­£åˆ™åŒ–ï¼Œé˜²è¿‡æ‹Ÿåˆ</li>
                        <li><strong>Lassoå›å½’ï¼š</strong>åŠ L1æ­£åˆ™åŒ–ï¼Œèƒ½ç‰¹å¾é€‰æ‹©</li>
                        <li><strong>å¼¹æ€§ç½‘ç»œï¼š</strong>L1+L2ç»“åˆï¼Œé«˜ç»´æ•°æ®å¥½</li>
                    </ul>
                </div>
                
                <div style="background: white; padding: 10px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <h4>ğŸŒ³ æ ‘æ–¹æ³•</h4>
                    <ul style="margin: 5px 0; padding-left: 20px;">
                        <li><strong>å†³ç­–æ ‘ï¼š</strong>åƒåˆ†å‰æ ‘ï¼Œæ˜“æ‡‚</li>
                        <li><strong>éšæœºæ£®æ—ï¼š</strong>å¤šæ£µæ ‘æŠ•ç¥¨ï¼Œæ›´ç¨³</li>
                        <li><strong>æ¢¯åº¦æå‡ï¼š</strong>æ ‘å æ ‘ï¼Œç²¾åº¦é«˜</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <h4>ğŸ’¡ ä¸€å¥è¯æ€»ç»“</h4>
                <p><strong>çº¿æ€§å›å½’</strong>åƒç›´å°ºï¼Œ<strong>å¤šé¡¹å¼å›å½’</strong>åƒæ›²çº¿å°ºï¼Œ
                <strong>æ ‘æ–¹æ³•</strong>åƒåˆ†å‰è·¯å£ï¼Œ<strong>æ­£åˆ™åŒ–æ–¹æ³•</strong>åƒå®‰å…¨ç½‘ã€‚
                é€‰ç®—æ³•å°±åƒé€‰å·¥å…·ï¼šç®€å•é—®é¢˜ç”¨ç›´å°ºï¼Œå¤æ‚é—®é¢˜ç”¨é«˜çº§å·¥å…·ï¼</p>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <h4>ğŸª è¶£å‘³è®°å¿†æ³•</h4>
                <p><strong>å£è¯€ï¼š</strong>"çº¿æ€§åƒç›´çº¿ï¼Œå¤šé¡¹å¼åƒæŠ›ç‰©çº¿ï¼Œ
                å²­å›å½’åŠ å¹³æ–¹ï¼ŒLassoåŠ ç»å¯¹å€¼ï¼Œ
                å†³ç­–æ ‘åƒåˆ†å‰ï¼Œéšæœºæ£®æ—åƒæ ‘æ—ï¼Œ
                æ¢¯åº¦æå‡åƒçˆ¬æ¥¼æ¢¯ï¼Œæ”¯æŒå‘é‡åƒå®‰å…¨å¸¦"</p>
            </div>
        </div>
    </div>
</body>
</html>