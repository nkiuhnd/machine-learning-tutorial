<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆä¸­ç”Ÿé€»è¾‘å›å½’å­¦ä¹ å·¥å…·</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            margin: 0;
            padding: 15px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 25px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 10px;
            background: #f9f9f9;
        }
        
        .chart-container {
            position: relative;
            height: 500px;
            margin: 15px 0;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input, button {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            background: #f5576c;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #d63384;
        }
        
        .info-panel {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .formula {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .prediction-result {
            background: #d4edda;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: #155724;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .data-table th, .data-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }
        
        .data-table th {
            background: #f5576c;
            color: white;
        }
        
        .sigmoid-curve {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .probability-display {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            text-align: center;
            margin: 10px 0;
        }
        
        .classification-result {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .pass {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .fail {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ é€»è¾‘å›å½’å­¦ä¹ ï¼ˆäºŒåˆ†ç±»ï¼‰</h1>
            <p>ç”¨æ•°å­¦æ–¹æ³•é¢„æµ‹"é€šè¿‡"æˆ–"ä¸é€šè¿‡"</p>
        </div>
        
        <div class="section">
            <h2>ğŸ“Š ç¬¬ä¸€æ­¥ï¼šè§‚å¯Ÿåˆ†ç±»æ•°æ®</h2>
            <p>æˆ‘ä»¬æ¥çœ‹çœ‹åŒå­¦ä»¬çš„å­¦ä¹ æ—¶é—´å’Œè€ƒè¯•æ˜¯å¦é€šè¿‡ï¼š</p>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>å­¦ç”Ÿ</th>
                        <th>å­¦ä¹ æ—¶é—´ï¼ˆå°æ—¶ï¼‰</th>
                        <th>è€ƒè¯•ç»“æœ</th>
                        <th>é€šè¿‡çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody id="dataTable">
                    <tr><td>å°æ˜</td><td>1</td><td>âŒ ä¸åŠæ ¼</td><td>0</td></tr>
                    <tr><td>å°çº¢</td><td>2</td><td>âŒ ä¸åŠæ ¼</td><td>0</td></tr>
                    <tr><td>å°åˆš</td><td>3</td><td>âœ… åŠæ ¼</td><td>1</td></tr>
                    <tr><td>å°ä¸½</td><td>4</td><td>âœ… åŠæ ¼</td><td>1</td></tr>
                    <tr><td>å°å¼º</td><td>5</td><td>âœ… åŠæ ¼</td><td>1</td></tr>
                    <tr><td>å°ç¾</td><td>6</td><td>âœ… ä¼˜ç§€</td><td>1</td></tr>
                </tbody>
            </table>
        </div>
        
        <div class="section">
            <h2>ğŸ¤” æ€è€ƒä¸æ¢ç´¢</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #f5576c;">
                <p><strong>å¦‚ä½•é¢„æµ‹"é€šè¿‡"è¿˜æ˜¯"ä¸é€šè¿‡"ï¼Ÿ</strong></p>
                <p>è§‚å¯Ÿä¸Šè¡¨ä¸­çš„æ•°æ®ï¼Œæ€è€ƒï¼š</p>
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li>å­¦ä¹ æ—¶é—´å’Œè€ƒè¯•é€šè¿‡ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</li>
                    <li>æœ‰æ²¡æœ‰ä¸€ä¸ª"åˆ†ç•Œçº¿"ï¼Ÿå­¦ä¹ æ—¶é—´è¶…è¿‡å¤šå°‘å°æ—¶å°±èƒ½é€šè¿‡ï¼Ÿ</li>
                    <li>å¦‚ä½•ç”¨æ•°å­¦æ–¹æ³•è¡¨ç¤ºè¿™ç§"æ˜¯/å¦"çš„å…³ç³»ï¼Ÿ</li>
                </ul>
                <p><strong>é€»è¾‘å›å½’çš„è§£å†³æ€è·¯ï¼š</strong></p>
                <p>å°†å­¦ä¹ æ—¶é—´è½¬åŒ–ä¸ºé€šè¿‡è€ƒè¯•çš„æ¦‚ç‡ï¼Œç„¶åæ ¹æ®æ¦‚ç‡å¤§å°åˆ¤æ–­"é€šè¿‡"æˆ–"ä¸é€šè¿‡"ã€‚</p>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ˆ ç¬¬äºŒæ­¥ï¼šå¯è§†åŒ–åˆ†ç±»æ•°æ®</h2>
            <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <button onclick="toggleDataPoints()" id="showDataBtn" style="background: #dc3545; color: white; font-weight: bold; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                    ğŸ‘ï¸ æ˜¾ç¤ºæ•°æ®ç‚¹
                </button>
                <button onclick="calculateLogisticRegression()" style="background: #28a745; color: white; font-weight: bold; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">ğŸ” è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹</button>
                <button onclick="generateRandomData()" style="background: #007bff; color: white; font-weight: bold; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">ğŸ² ç”Ÿæˆéšæœºæ•°æ®</button>
                <button onclick="resetData()" style="margin: 5px 0;">é‡ç½®æ•°æ®</button>
                <!--<span style="color: #666; font-size: 14px;">ç‚¹å‡»æŒ‰é’®åï¼Œæ•°æ®ç‚¹æ‰ä¼šå‡ºç°åœ¨åæ ‡ç³»ä¸­</span>-->
            </div>
            <div class="chart-container">
                <canvas id="scatterChart"></canvas>

            </div>
                            <div id="trainingProcess" style="background: #e8f4f8; padding: 15px; border-radius: 2px; font-family: monospace; font-size: 14px; line-height: 1.6;">
                <div id="trainingDetails">ç‚¹å‡»"è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹"æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹</div>
            </div>
        </div>

        <div style="display: flex; gap: 1px; margin-bottom: 10px;">
            <div style="flex: 1;">
                <div class="section">
                    <h2>ğŸ® ç¬¬ä¸‰æ­¥ï¼šé¢„æµ‹</h2>
                    <div class="controls" style="flex-direction: column; align-items: stretch;">

                        
                        <div class="input-group" style="margin-bottom: 15px;">
                            <label>é¢„æµ‹æ–°åŒå­¦ï¼š</label>
                            <input type="number" id="studyHours" min="0" max="10" step="0.5" value="3.5" style="margin: 5px 0;">
                            <button onclick="makePrediction()" style="margin: 5px 0;">é¢„æµ‹</button>
                        </div>
                        <div class="classification-result" id="classificationResult">
                            ç­‰å¾…é¢„æµ‹...
                        </div>
                        <div class="probability-display" id="probabilityDisplay">
                            è¾“å…¥å­¦ä¹ æ—¶é—´ï¼Œç‚¹å‡»"é¢„æµ‹ç»“æœ"æŸ¥çœ‹é€šè¿‡æ¦‚ç‡
                        </div>


                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸŒ€ ç¬¬å››æ­¥ï¼šç¥å¥‡çš„Så‹æ›²çº¿</h2>
            <p>é€»è¾‘å›å½’ä½¿ç”¨ç‰¹æ®Šçš„"Så‹æ›²çº¿"ï¼ˆsigmoidå‡½æ•°ï¼‰å°†ä»»ä½•æ•°å€¼è½¬æ¢ä¸º0-1ä¹‹é—´çš„æ¦‚ç‡ï¼š</p>
            <div class="sigmoid-curve">
                <div class="chart-container">
                    <canvas id="sigmoidChart"></canvas>
                </div>

                <div style="margin-top: 15px; font-size: 14px; color: #666;">
                    <strong>ç†è§£Så‹æ›²çº¿ï¼š</strong><br>
                    â€¢ æ¨ªè½´ï¼šå­¦ä¹ æ—¶é—´ï¼ˆ0-10å°æ—¶ï¼‰<br>
                    â€¢ çºµè½´ï¼šé€šè¿‡æ¦‚ç‡ï¼ˆ0-1ï¼‰<br>
                    â€¢ ä¸­å¿ƒç‚¹ï¼šæ ¹æ®å®é™…æ•°æ®è‡ªåŠ¨è®¡ç®—<br>
                    â€¢ æ›²çº¿ç‰¹ç‚¹ï¼šå°†ä»»æ„æ•°å€¼å‹ç¼©åˆ°0-1ä¹‹é—´ï¼Œå®ç°ä¸¤æåˆ†åŒ–
                </div>
            </div>
        </div>
        

        

        
        <div class="section">
            <h2>ğŸ¤– å°ç»“ï¼šä¸äººå·¥æ™ºèƒ½çš„å…³ç³»</h2>
            <div style="background: #f8d7da; padding: 15px; border-radius: 8px; border-left: 5px solid #dc3545;">
                <h3>ğŸ§  AIæ¯å¤©éƒ½åœ¨ç”¨é€»è¾‘å›å½’åšäºŒåˆ†ç±»ï¼</h3>
                <p><strong>åƒåœ¾é‚®ä»¶è¯†åˆ«ï¼š</strong>æ ¹æ®é‚®ä»¶å†…å®¹ç‰¹å¾ï¼Œé¢„æµ‹"åƒåœ¾é‚®ä»¶"æˆ–"æ­£å¸¸é‚®ä»¶"</p>
                <p><strong>ç–¾ç—…è¯Šæ–­ï¼š</strong>æ ¹æ®ä½“æ£€æŒ‡æ ‡ï¼Œé¢„æµ‹"æ‚£ç—…"æˆ–"å¥åº·"</p>
                <p><strong>ä¿¡ç”¨è¯„ä¼°ï¼š</strong>æ ¹æ®ä¸ªäººä¿¡æ¯ï¼Œé¢„æµ‹"é€šè¿‡"æˆ–"æ‹’ç»"è´·æ¬¾</p>
                <p><strong>äººè„¸è¯†åˆ«ï¼š</strong>æ ¹æ®é¢éƒ¨ç‰¹å¾ï¼Œé¢„æµ‹"æ˜¯åŒä¸€ä¸ªäºº"æˆ–"ä¸æ˜¯åŒä¸€ä¸ªäºº"</p>
                
                <h3>ğŸ¯ é€»è¾‘å›å½’çš„æ ¸å¿ƒæ€æƒ³</h3>
                <ol>
                    <li>å°†è¾“å…¥ç‰¹å¾è½¬åŒ–ä¸ºæ¦‚ç‡ï¼ˆ0-1ä¹‹é—´ï¼‰</li>
                    <li>è®¾ç½®é˜ˆå€¼ï¼ˆé€šå¸¸æ˜¯0.5ï¼‰è¿›è¡Œåˆ†ç±»</li>
                    <li>æ¦‚ç‡>0.5 â†’ ç±»åˆ«1ï¼Œæ¦‚ç‡â‰¤0.5 â†’ ç±»åˆ«0</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        let chart;
        let sigmoidChart;
        let studyData = [
            {hours: 1, result: 0, name: 'å°æ˜'},
            {hours: 2, result: 0, name: 'å°çº¢'},
            {hours: 3, result: 1, name: 'å°åˆš'},
            {hours: 4, result: 1, name: 'å°ä¸½'},
            {hours: 5, result: 1, name: 'å°å¼º'},
            {hours: 6, result: 1, name: 'å°ç¾'}
        ];

        let dataPointsVisible = false;
        let logisticModel = null;
        
        function initChart() {
            const ctx = document.getElementById('scatterChart').getContext('2d');
            
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'ä¸åŠæ ¼ (0)',
                        data: [],
                        backgroundColor: 'red',
                        borderColor: 'red',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: 'åŠæ ¼ (1)',
                        data: [],
                        backgroundColor: 'green',
                        borderColor: 'green',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: 'é€»è¾‘å›å½’æ›²çº¿',
                        data: [],
                        type: 'line',
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'å­¦ä¹ æ—¶é—´ï¼ˆå°æ—¶ï¼‰',
                                font: { size: 14 }
                            },
                            min: 0,
                            max: 10,
                            ticks: { font: { size: 12 } }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'é€šè¿‡æ¦‚ç‡',
                                font: { size: 14 }
                            },
                            min: -0.2,
                            max: 1.2,
                            ticks: { font: { size: 12 } }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'å­¦ä¹ æ—¶é—´ vs è€ƒè¯•é€šè¿‡æ¦‚ç‡',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            labels: { font: { size: 12 } }
                        }
                    }
                }
            });
            
            // åˆå§‹åŒ–sigmoidæ›²çº¿
            const sigmoidCtx = document.getElementById('sigmoidChart').getContext('2d');
            
            // æ ¹æ®å®é™…æ•°æ®è®¡ç®—sigmoidå‡½æ•°çš„ä¸­å¿ƒç‚¹
            const passHours = studyData.filter(d => d.result === 1).map(d => d.hours);
            const failHours = studyData.filter(d => d.result === 0).map(d => d.hours);
            
            let centerPoint = 5; // é»˜è®¤ä¸­å¿ƒç‚¹
            if (passHours.length > 0 && failHours.length > 0) {
                const avgPass = passHours.reduce((a, b) => a + b, 0) / passHours.length;
                const avgFail = failHours.reduce((a, b) => a + b, 0) / failHours.length;
                centerPoint = (avgPass + avgFail) / 2; // å®é™…æ•°æ®çš„ä¸­å¿ƒç‚¹
            }
            
            // ç”ŸæˆåŸºäºå®é™…æ•°æ®çš„sigmoidæ›²çº¿
            const sigmoidData = [];
            for (let x = 0; x <= 10; x += 0.1) {
                // ä½¿ç”¨å®é™…æ•°æ®çš„ä¸­å¿ƒç‚¹
                const z = (x - centerPoint) * 2;  // æ ¹æ®æ•°æ®åˆ†å¸ƒè°ƒæ•´æ–œç‡
                const y = 1 / (1 + Math.exp(-z));
                sigmoidData.push({x: x, y: y});
            }
            
            sigmoidChart = new Chart(sigmoidCtx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Sigmoidå‡½æ•°',
                        data: sigmoidData,
                        borderColor: 'purple',
                        backgroundColor: 'rgba(128, 0, 128, 0.1)',
                        borderWidth: 3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            title: { display: true, text: 'å­¦ä¹ æ—¶é—´ï¼ˆå°æ—¶ï¼‰' },
                            min: 0,
                            max: 10,
                            ticks: {
                                display: true,
                                stepSize: 1,
                                autoSkip: false
                            },
                            grid: {
                                display: true
                            }
                        },
                        y: {
                            title: { display: true, text: 'é€šè¿‡æ¦‚ç‡' },
                            min: 0,
                            max: 1,
                            ticks: {
                                stepSize: 0.1,
                                callback: function(value) { return value.toFixed(1); },
                                display: true  // ç¡®ä¿åˆ»åº¦æ˜¾ç¤º
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const x = context.raw.x.toFixed(1);
                                    const y = context.raw.y.toFixed(4);
                                    return `å­¦ä¹ æ—¶é—´: ${x}å°æ—¶, æ¦‚ç‡: ${y}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function toggleDataPoints() {
            if (!dataPointsVisible) {
                updateChartData();
                document.getElementById('showDataBtn').innerHTML = 'ğŸ™ˆ éšè—æ•°æ®ç‚¹';
                document.getElementById('showDataBtn').style.background = '#6c757d';
                dataPointsVisible = true;
            } else {
                chart.data.datasets[0].data = [];
                chart.data.datasets[1].data = [];
                chart.data.datasets[2].data = [];
                chart.update();
                document.getElementById('showDataBtn').innerHTML = 'ğŸ‘ï¸ æ˜¾ç¤ºæ•°æ®ç‚¹';
                document.getElementById('showDataBtn').style.background = '#dc3545';
                dataPointsVisible = false;
            }
        }
        
        function updateSigmoidCurve() {
            // æ ¹æ®å®é™…æ•°æ®è®¡ç®—sigmoidå‡½æ•°çš„ä¸­å¿ƒç‚¹
            const passHours = studyData.filter(d => d.result === 1).map(d => d.hours);
            const failHours = studyData.filter(d => d.result === 0).map(d => d.hours);
            
            let centerPoint = 5; // é»˜è®¤ä¸­å¿ƒç‚¹
            if (passHours.length > 0 && failHours.length > 0) {
                const avgPass = passHours.reduce((a, b) => a + b, 0) / passHours.length;
                const avgFail = failHours.reduce((a, b) => a + b, 0) / failHours.length;
                centerPoint = (avgPass + avgFail) / 2; // å®é™…æ•°æ®çš„ä¸­å¿ƒç‚¹
            }
            
            // æ›´æ–°sigmoidæ›²çº¿æ•°æ®
            const sigmoidData = [];
            for (let x = 0; x <= 10; x += 0.1) {
                const z = (x - centerPoint) * 2;  // æ ¹æ®æ•°æ®åˆ†å¸ƒè°ƒæ•´æ–œç‡
                const y = 1 / (1 + Math.exp(-z));
                sigmoidData.push({x: x, y: y});
            }
            
            sigmoidChart.data.datasets[0].data = sigmoidData;
            sigmoidChart.update();
        }
        
        function updateChartData() {
            const failData = studyData.filter(d => d.result === 0);
            const passData = studyData.filter(d => d.result === 1);
            
            // ä¸ºæ•°æ®ç‚¹è®¡ç®—å¯¹åº”çš„æ¦‚ç‡å€¼
            const failPoints = failData.map(d => {
                if (logisticModel) {
                    const z = logisticModel.a * d.hours + logisticModel.b;
                    const probability = 1 / (1 + Math.exp(-z));
                    return {x: d.hours, y: probability};
                } else {
                    return {x: d.hours, y: d.hours/10}; // åŠ¨æ€åˆ†å¸ƒé»˜è®¤ä½ç½®
                }
            });
            
            const passPoints = passData.map(d => {
                if (logisticModel) {
                    const z = logisticModel.a * d.hours + logisticModel.b;
                    const probability = 1 / (1 + Math.exp(-z));
                    return {x: d.hours, y: probability};
                } else {
                    return {x: d.hours, y: 0.5 + d.hours/20}; // åŠ¨æ€åˆ†å¸ƒé»˜è®¤ä½ç½®
                }
            });
            
            chart.data.datasets[0].data = failPoints;
            chart.data.datasets[1].data = passPoints;
            
            if (logisticModel) {
                const lineData = [];
                for (let x = 0; x <= 10; x += 0.1) {
                    const z = logisticModel.a * x + logisticModel.b;
                    const probability = 1 / (1 + Math.exp(-z));
                    lineData.push({x: x, y: probability});
                }
                chart.data.datasets[2].data = lineData;
            }
            
            chart.update();
            
            // åŒæ—¶æ›´æ–°sigmoidæ›²çº¿
            updateSigmoidCurve();
        }
        
        function calculateLogisticRegression() {
            if (!dataPointsVisible) {
                alert('è¯·å…ˆç‚¹å‡»"æ˜¾ç¤ºæ•°æ®ç‚¹"æŒ‰é’®ï¼Œè®©æ•°æ®å‡ºç°åœ¨åæ ‡ç³»ä¸­ï¼');
                return;
            }
            
            if (studyData.length < 2) {
                alert('éœ€è¦è‡³å°‘2ä¸ªæ•°æ®ç‚¹æ‰èƒ½è®¡ç®—é€»è¾‘å›å½’ï¼');
                return;
            }
            
            document.getElementById('trainingDetails').innerHTML = 
                'ğŸ”„ æ­£åœ¨è®­ç»ƒé€»è¾‘å›å½’æ¨¡å‹...<br>' +
                'ğŸ’¡ ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•å¯»æ‰¾æœ€ä½³å‚æ•°...<br>' +
                'ğŸ“Š è®¡ç®—æŸå¤±å‡½æ•°å¹¶ä¼˜åŒ–...<br>' +
                'âœ… æ¨¡å‹è®­ç»ƒå®Œæˆï¼';
            
            // ç®€åŒ–çš„é€»è¾‘å›å½’è®¡ç®—
            const {a, b} = calculateLogisticParameters();
            logisticModel = {a, b};
            
            updateChartData();
            
            document.getElementById('trainingDetails').innerHTML = 
                `ğŸ¯ é€»è¾‘å›å½’æ¨¡å‹ï¼š<br>` +
                `z = ${a.toFixed(3)} Ã— å­¦ä¹ æ—¶é—´ + ${b.toFixed(3)}<br>` +
                `æ¦‚ç‡ = 1 / (1 + e^(-z))<br>` +
                `ğŸ“ˆ é˜ˆå€¼ï¼šæ¦‚ç‡ > 0.5 â†’ åŠæ ¼ï¼Œæ¦‚ç‡ â‰¤ 0.5 â†’ ä¸åŠæ ¼`;
        }
        
        function calculateLogisticParameters() {
            // ç®€åŒ–çš„å‚æ•°è®¡ç®—
            let a = 0, b = 0;
            
            // åŸºäºæ•°æ®è¶‹åŠ¿ä¼°è®¡å‚æ•°
            const passHours = studyData.filter(d => d.result === 1).map(d => d.hours);
            const failHours = studyData.filter(d => d.result === 0).map(d => d.hours);
            
            if (passHours.length > 0 && failHours.length > 0) {
                const avgPass = passHours.reduce((a, b) => a + b, 0) / passHours.length;
                const avgFail = failHours.reduce((a, b) => a + b, 0) / failHours.length;
                
                a = 2 / (avgPass - avgFail); // æ–œç‡
                b = -a * (avgPass + avgFail) / 2; // æˆªè·
            }
            
            return {a, b};
        }
        
        function makePrediction() {
            if (!logisticModel) {
                alert('è¯·å…ˆç‚¹å‡»"è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹"æŒ‰é’®ï¼Œå»ºç«‹æ¨¡å‹åå†è¿›è¡Œé¢„æµ‹ï¼');
                return;
            }
            
            const hours = parseFloat(document.getElementById('studyHours').value);
            const z = logisticModel.a * hours + logisticModel.b;
            const probability = 1 / (1 + Math.exp(-z));
            
            document.getElementById('probabilityDisplay').innerHTML = 
                `ğŸ“Š é¢„æµ‹é€šè¿‡æ¦‚ç‡ï¼š${(probability * 100).toFixed(1)}%`;
            
            const resultDiv = document.getElementById('classificationResult');
            if (probability > 0.5) {
                resultDiv.className = 'classification-result pass';
                resultDiv.innerHTML = `âœ… é¢„è®¡é€šè¿‡è€ƒè¯•ï¼ï¼ˆæ¦‚ç‡ > 50%ï¼‰`;
            } else {
                resultDiv.className = 'classification-result fail';
                resultDiv.innerHTML = `âŒ é¢„è®¡ä¸åŠæ ¼ï¼ï¼ˆæ¦‚ç‡ â‰¤ 50%ï¼‰`;
            }
            
            // åœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºé¢„æµ‹ç‚¹
            const predictionDataset = {
                label: 'é¢„æµ‹ç‚¹',
                data: [{x: hours, y: probability}],
                backgroundColor: 'orange',
                borderColor: 'orange',
                pointRadius: 12,
                pointStyle: 'star'
            };
            
            // ç§»é™¤ä¹‹å‰çš„é¢„æµ‹ç‚¹
            while (chart.data.datasets.length > 3) {
                chart.data.datasets.pop();
            }
            
            chart.data.datasets.push(predictionDataset);
            chart.update();
        }
        
        function addData() {
            const hours = parseFloat(document.getElementById('newHours').value);
            const result = parseInt(document.getElementById('newResult').value);
            
            if (isNaN(hours) || hours < 0 || hours > 10) {
                alert('è¯·è¾“å…¥0-10ä¹‹é—´çš„å­¦ä¹ æ—¶é—´ï¼');
                return;
            }
            
            const names = ['å°å', 'å°äº®', 'å°èŠ³', 'å°å‹‡', 'å°æ…§', 'å°æ¶›', 'å°é™', 'å°é¾™', 'å°éœ', 'å°å³°'];
            const randomName = names[Math.floor(Math.random() * names.length)];
            
            studyData.push({
                hours: hours,
                result: result,
                name: randomName
            });
            
            updateTable();
            updateChartData();
            updateSigmoidCurve();
            
            document.getElementById('newHours').value = '';
            document.getElementById('newResult').value = '0';
            
            // é‡ç½®æ¨¡å‹
            logisticModel = null;
            document.getElementById('trainingDetails').innerHTML = 'ç‚¹å‡»"è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹"æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹';
            document.getElementById('probabilityDisplay').innerHTML = 'è¾“å…¥å­¦ä¹ æ—¶é—´ï¼Œç‚¹å‡»"é¢„æµ‹ç»“æœ"æŸ¥çœ‹é€šè¿‡æ¦‚ç‡';
            document.getElementById('classificationResult').innerHTML = 'ç­‰å¾…é¢„æµ‹...';
            document.getElementById('classificationResult').className = 'classification-result';
        }
        
        function resetData() {
            studyData = [
                {hours: 1, result: 0, name: 'å°æ˜'},
                {hours: 2, result: 0, name: 'å°çº¢'},
                {hours: 3, result: 1, name: 'å°åˆš'},
                {hours: 4, result: 1, name: 'å°ä¸½'},
                {hours: 5, result: 1, name: 'å°å¼º'},
                {hours: 6, result: 1, name: 'å°ç¾'}
            ];
            
            updateTable();
            updateChartData();
            updateSigmoidCurve();
            
            logisticModel = null;
            document.getElementById('trainingDetails').innerHTML = 'ç‚¹å‡»"è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹"æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹';
            document.getElementById('probabilityDisplay').innerHTML = 'è¾“å…¥å­¦ä¹ æ—¶é—´ï¼Œç‚¹å‡»"é¢„æµ‹ç»“æœ"æŸ¥çœ‹é€šè¿‡æ¦‚ç‡';
            document.getElementById('classificationResult').innerHTML = 'ç­‰å¾…é¢„æµ‹...';
            document.getElementById('classificationResult').className = 'classification-result';
            
            // æ¸…é™¤é¢„æµ‹ç‚¹
            while (chart.data.datasets.length > 3) {
                chart.data.datasets.pop();
            }
            if (dataPointsVisible) {
                chart.update();
            }
        }
        
        function generateRandomData() {
            studyData = [];
            const names = ['å°æ˜', 'å°çº¢', 'å°åˆš', 'å°ä¸½', 'å°å¼º', 'å°ç¾', 'å°å', 'å°äº®', 'å°èŠ³', 'å°å‹‡', 'å°æ…§', 'å°æ¶›'];
            
            for (let i = 0; i < 12; i++) {
                const hours = Math.round((Math.random() * 8 + 1) * 10) / 10;
                // å­¦ä¹ æ—¶é—´è¶ŠçŸ­ï¼Œä¸åŠæ ¼æ¦‚ç‡è¶Šé«˜
                const probability = 1 / (1 + Math.exp(-(hours - 4)));
                const result = Math.random() < probability ? 1 : 0;
                
                studyData.push({
                    hours: hours,
                    result: result,
                    name: names[i % names.length]
                });
            }
            
            updateTable();
            updateChartData();
            updateSigmoidCurve();
            
            logisticModel = null;
            document.getElementById('trainingDetails').innerHTML = 'ç‚¹å‡»"è®¡ç®—é€»è¾‘å›å½’æ¨¡å‹"æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹';
            document.getElementById('probabilityDisplay').innerHTML = 'è¾“å…¥å­¦ä¹ æ—¶é—´ï¼Œç‚¹å‡»"é¢„æµ‹ç»“æœ"æŸ¥çœ‹é€šè¿‡æ¦‚ç‡';
            document.getElementById('classificationResult').innerHTML = 'ç­‰å¾…é¢„æµ‹...';
            document.getElementById('classificationResult').className = 'classification-result';
            
            // æ¸…é™¤é¢„æµ‹ç‚¹
            while (chart.data.datasets.length > 3) {
                chart.data.datasets.pop();
            }
            if (dataPointsVisible) {
                chart.update();
            }
        }
        
        function updateTable() {
            const tbody = document.getElementById('dataTable');
            tbody.innerHTML = '';
            
            studyData.forEach(data => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${data.name}</td>
                    <td>${data.hours}</td>
                    <td>${data.result ? 'âœ… åŠæ ¼' : 'âŒ ä¸åŠæ ¼'}</td>
                    <td>${data.result}</td>
                `;
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            initChart();
        });
    </script>
</body>
